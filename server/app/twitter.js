// =============================================================================
// Load your Database Modules ==================================================
// =============================================================================
  var Twitter    = require('node-tweet-stream');

// =============================================================================
// Load the database variables =================================================
// =============================================================================
  var config = require('../config/private_config.js').twitter;



// =============================================================================
// Local Variables =============================================================
// =============================================================================
  var listener = () => {};
  var tweets = 0;

// =============================================================================
// Public Functions ============================================================
// =============================================================================
  module.exports = (word) => {
    // =============================================================================
    // Connect to your database. ===================================================
    // =============================================================================
    var connection = new Twitter(config)

    // =============================================================================
    // Private Functions ===========================================================
    // =============================================================================
    connection.on("tweet", function(tweet) {
      tweets++;
      process.stdout.clearLine();  // clear current text
      process.stdout.cursorTo(0);  // move cursor to beginning of line
      process.stdout.write("Tweets Recieved: " + tweets);

      listener({
        word: word,
        tweet: tweet
      });
    });

    connection.on('error', function (err) {
      console.log('Oh no', err)
    })

    // =============================================================================
    // Stream Config ===============================================================
    // =============================================================================
    connection.track(word)
    // connection.language('en')

    // =============================================================================
    // Stream Config ===============================================================
    // =============================================================================
    return {
      listen: (newListener) => {
        listener = newListener;
      }
    }
  }

