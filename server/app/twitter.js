// =============================================================================
// Load your Database Modules ==================================================
// =============================================================================
  var Twitter    = require('node-tweet-stream');

// =============================================================================
// Load the database variables =================================================
// =============================================================================
  var config = require('../config/private_config.js').twitter;

// =============================================================================
// Connect to your database. ===================================================
// =============================================================================
  var connection = new Twitter(config)

// =============================================================================
// Local Variables =============================================================
// =============================================================================
  var listeners = [];
  // var tweets = 0;

// =============================================================================
// Public Functions ============================================================
// =============================================================================
  module.exports = {

    listen: function(listener) {
      listeners.push(listener);
    }

  };

// =============================================================================
// Private Functions ===========================================================
// =============================================================================
  connection.on("tweet", function(tweet) {
    // tweets++;
    // process.stdout.clearLine();  // clear current text
    // process.stdout.cursorTo(0);  // move cursor to beginning of line
    // process.stdout.write("Tweets Recieved: " + tweets);
    listeners.forEach(function(listener) {
      listener(tweet);
    })
  });

  connection.on('error', function (err) {
    console.log('Oh no', err)
  })


// =============================================================================
// Stream Config ===============================================================
// =============================================================================
  connection.track('trump')
  // connection.language('en')
